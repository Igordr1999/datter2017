{% extends 'base_currency.html' %}
{% load l10n %}

{% block currency_title %}–ó–Ω–∞—á–µ–Ω–∏–µ –≤–∞–ª—é—Ç—ã "{{ valuta.name_ru}}" ({{ valuta.char_code }}){% endblock %}

{% block currency_content %}

    <div id="currency_chart" style="height: 490px; min-width: 310px;"></div>

    <script>
    Highcharts.setOptions({
        global: {
        timezoneOffset: -3 * 60
    },
    lang: {
        invalidDate: "–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞—Ç—ã",
        loading: "–ò–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∞...",
        noData: "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö",
        downloadCSV: "–°–∫–∞—á–∞—Ç—å –≤ CSV",
        downloadJPEG: "–°–∫–∞—á–∞—Ç—å –≤ JPEG",
        downloadPDF: "–°–∫–∞—á–∞—Ç—å –≤ PDF",
        downloadPNG: "–°–∫–∞—á–∞—Ç—å –≤ PNG",
        downloadSVG: "–°–∫–∞—á–∞—Ç—å –≤ SVG",
        downloadXLS: "–°–∫–∞—á–∞—Ç—å –≤ XLS",
        printChart: "–ù–∞–ø–µ—á–∞—Ç–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫",
        rangeSelectorFrom: "–í –¥–∏–∞–ø–æ–∑–æ–Ω–µ —Å",
        rangeSelectorTo: "–¥–æ",
        rangeSelectorZoom: "–ú–∞—à—Ç–∞–±",
        months: [
            '–Ø–Ω–≤–∞—Ä—å', '–§–µ–≤—Ä–∞–ª—å', '–ú–∞—Ä—Ç', '–ê–ø—Ä–µ–ª—å',
            '–ú–∞–π', '–ò—é–Ω—å', '–ò—é–ª—å', '–ê–≤–≥—É—Å—Ç',
            '–°–µ–Ω—Ç—è–±—Ä—å', '–û–∫—Ç—è–±—Ä—å', '–ù–æ—è–±—Ä—å', '–î–µ–∫–∞–±—Ä—å'
        ],
        weekdays: [
            '–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ', '–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫', '–í—Ç–æ—Ä–Ω–∏–∫', '–°—Ä–µ–¥–∞',
            '–ß–µ—Ç–≤–µ—Ä–≥', '–ü—è—Ç–Ω–∏—Ü–∞', '–°—É–±–±–æ—Ç–∞'
        ],
        shortMonths: [
            '–Ø–Ω–≤', '–§–µ–≤', '–ú–∞—Ä—Ç', '–ê–ø—Ä',
            '–ú–∞–π', '–ò—é–Ω—å', '–ò—é–ª—å', '–ê–≤–≥',
            '–°–µ–Ω', '–û–∫—Ç', '–ù–æ—è–±', '–î–µ–∫'
        ],
    }
});

    // Create the chart
    Highcharts.stockChart('currency_chart', {

        credits:{
            href: "https://datter.ru/",
            text: "Datter.ru",
        },

        title: {
            text: '–ö—É—Ä—Å –≤–∞–ª—é—Ç—ã'
        },

        rangeSelector: {
            buttons: [{
                type: 'week',
                count: 1,
                text: '–∑–∞ –Ω–µ–¥–µ–ª—é'
            }, {
                type: 'month',
                count: 1,
                text: '–∑–∞ –º–µ—Å—è—Ü'
            }, {
                type: 'month',
                count: 3,
                text: '–∑–∞ –∫–≤–∞—Ä—Ç–∞–ª'
            },{
                type: 'ytd',
                count: 1,
                text: '–∑–∞ –ø–æ–ª–≥–æ–¥–∞'
            }, {
                type: 'all',
                count: 1,
                text: '–∑–∞ –≤—Å—ë –≤—Ä–µ–º—è'
            }],
            buttonTheme: {
                width: 100
            },
            selected: 1,
            inputEnabled: true
        },

        series: [{
            name: '–ó–Ω–∞—á–µ–Ω–∏–µ',
            data:
[
        {% for v in values %}
            [{{ v.date|date:"U" }}000,{{v.value|unlocalize}}],
        {% endfor %}
],

            tooltip: {
                valueDecimals: 2
            }
        }]
    });
    </script>
{% endblock %}

{% block extra_block %}
<table class="uk-table uk-table-striped">
    <thead>
        <tr>
            <th>–î–∞—Ç–∞</th>
            <th>–ö—É—Ä—Å</th>
            <th>–ò–∑–º–µ–Ω–µ–Ω–∏–µ</th>
        </tr>
    </thead>
    <tbody class="currency_table">
    {% for l in last_values %}
        <tr>
            <td>{{ l.date|date:"SHORT_DATE_FORMAT"}}</td>
            <td>{{l.value|floatformat:4}}</td>
            {% if l.direction_change == "T" %}
                <td class="symbol_change_top">ü°π ({{ l.percent_change|floatformat:2 }}%)</td>
                {% elif l.direction_change == "D" %}
                <td class="symbol_change_down">ü°ª ({{ l.percent_change }}%)</td>
                {% else %}
                <td>‚ö´ ({{ l.percent_change }}%)</td>
            {% endif %}
        </tr>
    {% endfor %}
    </tbody>
</table>
{% endblock %}

{% block currency_menu %}
                        <div class="uk-inline">
                            <button class="uk-button uk-button-default" type="button">–ú–µ–Ω—é —Ä–∞–∑–¥–µ–ª–∞ –≤–∞–ª—é—Ç—ã</button>
                            <div uk-dropdown="pos: bottom-justify">
                                <ul class="uk-nav uk-dropdown-nav">
                                    <li class="uk-nav-header">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–∞–ª—é—Ç—ã</li>
                                    <li><a href="{% url "currency_values" 'USD' %}">–î–æ–ª–ª–∞—Ä</a></li>
                                    <li><a href="{% url "currency_values" 'EUR' %}">–ï–≤—Ä–æ</a></li>
                                    <li class="uk-nav-divider"></li>
                                    <li><a href="{% url "currency" %}">–ö –æ–±—â–µ–º—É —Å–ø–∏—Å–∫—É</a></li>
                                </ul>
                            </div>
                        </div>
{% endblock %}